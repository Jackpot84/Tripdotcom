<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="User">
	<insert id="join" parameterType="com.koreait.user.dto.UserBean" >
		INSERT INTO TRIP_USER (USER_ID ,USER_EMAIL,USER_PW,USER_JOINDATE) VALUES (TRIP_USER_seq.nextval,#{user_email},#{user_pw},sysdate)
	</insert>
	
	<select id="login" parameterType="com.koreait.user.dto.UserBean" resultType="com.koreait.user.dto.UserBean">
		SELECT * FROM TRIP_USER tu WHERE USER_EMAIL = #{user_email} AND USER_PW = #{user_pw}
	</select>
	
	<select id="getReservation" parameterType="_int" resultType="com.koreait.user.dto.ReservationPaymentsBean">
		SELECT * FROM RESERVATION_PAYMENTS WHERE USER_ID = #{user_id}
	</select>
	
	<select id="resCount" parameterType="_int" resultType="_int">
	SELECT COUNT(*) FROM RESERVATION_PAYMENTS rp WHERE USER_ID =#{user_id}
	</select>
	
		<select id="getResList" resultType="com.koreait.user.dto.ReservationPaymentsBean" parameterType="hashmap">
	 SELECT * FROM 
		(SELECT rownum R, d.*
			FROM (SELECT * FROM RESERVATION_PAYMENTS WHERE user_id = #{user_id} ORDER BY RESERVATION_ID DESC) D ) B
	 WHERE B.R BETWEEN #{startRow} AND #{endRow}
	</select>
	
</mapper>





